<app-navbar></app-navbar>
<nz-content>
  <nz-row nzJustify="center">
    <nz-col nzSpan="20">
      <h1>Todo List - Kiểm soát nhiệm vụ</h1>
      <nz-form nzLayout="inline" [formGroup]="filterForm">
        <nz-form-item>
          <nz-form-control>
            <nz-select formControlName="period" nzPlaceHolder="Lọc theo thời gian">
              <nz-option nzValue="day" nzLabel="Ngày"></nz-option>
              <nz-option nzValue="week" nzLabel="Tuần"></nz-option>
              <nz-option nzValue="month" nzLabel="Tháng"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-control>
            <button nz-button nzType="primary" (click)="filterTasks()">Lọc</button>
          </nz-form-control>
        </nz-form-item>
      </nz-form>
      <button nz-button nzType="primary" (click)="openAddModal()">Thêm nhiệm vụ</button>
      <nz-table #taskTable [nzData]="filteredTasks">
        <thead>
          <tr>
            <th>ID</th>
            <th>Tiêu đề</th>
            <th>Mô tả</th>
            <th>Hạn chót</th>
            <th>Trạng thái</th>
            <th>Ưu tiên</th>
            <th>Hành động</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let task of taskTable.data">
            <td>{{ task.id }}</td>
            <td>{{ task.title }}</td>
            <td>{{ task.description }}</td>
            <td>{{ task.dueDate | date }}</td>
            <td>{{ task.status }}</td>
            <td>{{ task.priority }}</td>
            <td>
              <button nz-button nzType="default" (click)="openEditModal(task)">Sửa</button>
              <button nz-button nzDanger (click)="deleteTask(task.id)">Xóa</button>
            </td>
          </tr>
        </tbody>
      </nz-table>
    </nz-col>
  </nz-row>
</nz-content>
<nz-modal [(nzVisible)]="isModalVisible" nzTitle="{{editMode ? 'Sửa nhiệm vụ' : 'Thêm nhiệm vụ'}}" (nzOnCancel)="handleCancel()" (nzOnOk)="handleOk()">
  <ng-container *nzModalContent>
    <form nz-form [formGroup]="taskForm">
      <nz-form-item>
        <nz-form-label>Tiêu đề</nz-form-label>
        <nz-form-control nzErrorTip="Vui lòng nhập tiêu đề!">
          <input nz-input formControlName="title" />
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>Mô tả</nz-form-label>
        <nz-form-control>
          <textarea nz-input formControlName="description"></textarea>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>Hạn chót</nz-form-label>
        <nz-form-control nzErrorTip="Vui lòng chọn ngày!">
          <nz-date-picker formControlName="dueDate"></nz-date-picker>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>Trạng thái</nz-form-label>
        <nz-form-control>
          <nz-select formControlName="status">
            <nz-option nzValue="pending" nzLabel="Pending"></nz-option>
            <nz-option nzValue="in-progress" nzLabel="In Progress"></nz-option>
            <nz-option nzValue="completed" nzLabel="Completed"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
      <nz-form-item>
        <nz-form-label>Ưu tiên</nz-form-label>
        <nz-form-control>
          <nz-select formControlName="priority">
            <nz-option nzValue="low" nzLabel="Low"></nz-option>
            <nz-option nzValue="medium" nzLabel="Medium"></nz-option>
            <nz-option nzValue="high" nzLabel="High"></nz-option>
          </nz-select>
        </nz-form-control>
      </nz-form-item>
    </form>
  </ng-container>
</nz-modal>
<app-footer></app-footer>
